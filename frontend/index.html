<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="css/style.css?v=5007" />
<title>Calendar App</title>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
  <div class="app">

    <!-- ===== PAGES ===== -->
    <main class="pages">

      <!-- Friends -->
      <section class="page is-active" id="page-friends" >
        <header class="page-header">
          <div class="page-title">–î—Ä—É–∑—å—è</div>
          <div class="page-sub">–ì—Ä—É–ø–ø—ã –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏</div>
        </header>

        <div class="card hero" id="groupCard" role="button" tabindex="0">
          <div class="hero-badge">GROUP</div>
          <div class="hero-title" id="groupCardTitle">–ì—Ä—É–ø–ø–∞</div>
          <div class="hero-sub" id="groupCardSub"></div>
        </div>
        <div class="card list">
          <button class="list-row" id="inviteBtn">
            <span class="row-ico">üîó</span>
            <span class="row-text">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è</span>
            <span class="row-arrow">‚Ä∫</span>
          </button>
          <button class="list-row" id="groupsBtn">
            <span class="row-ico">üóìÔ∏è</span>
            <span class="row-text">–ì—Ä—É–ø–ø—ã</span>
            <span class="row-arrow">‚Ä∫</span>
          </button>
        </div>

      </section>

      <!-- Calendar -->
      <section class="page" id="page-calendar">
        <header class="topbar">
          <button class="icon-btn" id="prevMonth" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü">
            <span class="ico">‚Äπ</span>
          </button>

          <div class="topbar-center">
            <div class="monthTitle" id="monthTitle">–§–µ–≤—Ä–∞–ª—å</div>
            <div class="yearTitle" id="yearTitle">2026</div>
          </div>

          <button class="pill-btn" id="todayBtn">–°–µ–≥–æ–¥–Ω—è</button>

          <button class="icon-btn icon-btn-right" id="nextMonth" aria-label="–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü">
            <span class="ico">‚Ä∫</span>
          </button>
        </header>

        <div class="chips-row" id="chipsRow">
          <button class="chip" id="chipToday" type="button">–°–µ–≥–æ–¥–Ω—è</button>
          <button class="chip" id="chipTomorrow" type="button">–ó–∞–≤—Ç—Ä–∞</button>
          <button class="chip" id="chipWeekend" type="button">–í—ã—Ö–æ–¥–Ω—ã–µ</button>
          <button class="chip" id="chipWeek" type="button">–ù–µ–¥–µ–ª—è</button>
          <button class="chip" id="chipFindWindow" type="button">–ù–∞–π—Ç–∏ –æ–∫–Ω–æ</button>
        </div>

        <div class="calendar">
          <div class="weekdays">
            <div class="weekday">–ü–ù</div>
            <div class="weekday">–í–¢</div>
            <div class="weekday">–°–†</div>
            <div class="weekday">–ß–¢</div>
            <div class="weekday">–ü–¢</div>
            <div class="weekday weekend">–°–ë</div>
            <div class="weekday weekend">–í–°</div>
          </div>

          <div class="month-grid" id="daysGrid"></div>
        </div>

      </section>

      <!-- Profile -->
      <section class="page" id="page-profile">
        <header class="page-header profile-header" id="profileHeader" role="button" tabindex="0">
          <div class="avatar" id="profileAvatar">ü¶à</div>
          <div>
            <div class="page-title" id="profileNickname">matthew mal</div>
            <div class="page-sub" id="profileSub">–ü—Ä–æ—Ñ–∏–ª—å</div>
          </div>
        </header>

        <div class="card hero hero-gold" hidden>
          <div class="hero-badge">PREMIUM</div>
          <div class="hero-title">–°–æ–±–∏—Ä–∞–π—Ç–µ –ø–ª–∞–Ω—ã –≤–º–µ—Å—Ç–µ</div>
          <div class="hero-sub">–ì—Ä—É–ø–ø—ã ¬∑ —Ü–≤–µ—Ç–∞ ¬∑ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</div>
          <div class="hero-actions">
            <button class="chip">–î—Ä—É–∑—å—è</button>
            <button class="chip">–¶–≤–µ—Ç–∞</button>
            <button class="chip">–ò–∫–æ–Ω–∫–∏</button>
          </div>
        </div>

        <div class="card list">
<button class="list-row" id="notificationsBtn">
            <span class="row-ico">üîî</span>
            <span class="row-text">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
            <span class="row-arrow">‚Ä∫</span>
          </button>
          <button class="list-row" id="settingsBtn">
            <span class="row-ico">‚öôÔ∏è</span>
            <span class="row-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            <span class="row-arrow">‚Ä∫</span>
          </button>
        </div>

        <div class="card upcoming" id="upcomingCard">
          <div class="upcoming-title">–ë–ª–∏–∂–∞–π—à–µ–µ</div>
          <div class="upcoming-list" id="upcomingList"></div>
        </div>
      </section>

    </main>

    
    <!-- Profile Fullscreen Edit -->
    <div class="fullscreen" id="profileEdit" hidden>
      <header class="fs-header">
        <button class="icon-btn" id="profileEditBack" type="button" aria-label="–ù–∞–∑–∞–¥">‚Äπ</button>
        <div class="fs-title">–ü—Ä–æ—Ñ–∏–ª—å</div>
        <button class="icon-btn" id="profileEditSave" type="button" aria-label="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">‚úì</button>
      </header>

      <div class="fs-body">
        <div class="avatar-wrap">
          <div class="avatar big" id="editAvatarPreview">ü¶à</div>
          <button class="icon-btn pencil" id="editAvatarBtn" type="button" aria-label="–ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä">
            <i data-lucide="pencil"></i>
          </button>
          <input id="avatarFileInput" type="file" accept="image/*" hidden />
        </div>

        <div class="card">
          <label class="field-label">–ù–∏–∫–Ω–µ–π–º (–≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –≤–∞–º)</label>
          <input class="text-input" id="editNickname" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: matthew mal" />

          <label class="field-label" style="margin-top:14px;">Username (–≤–∏–¥—è—Ç –¥—Ä—É–≥–∏–µ)</label>
          <input class="text-input" id="editUsername" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: matthewmal" />

          <div class="hint" style="margin-top:14px;">–ü–æ–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ (–±—ç–∫ –¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ).</div>
        </div>
      </div>
    </div>


    <!-- ===== SHEETS ===== -->
    <div class="sheet-backdrop" id="sheetBackdrop" hidden></div>

    <!-- Busy sheet -->
    <div class="sheet" id="busySheet" aria-hidden="true">
      <div class="sheet-handle"></div>
      <div class="sheet-header">
        <div class="sheet-title" id="busyTitle">–ó–∞–Ω—è—Ç–æ—Å—Ç—å</div>
        <button class="sheet-close" id="closeBusy" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="sheet-body">
        <div class="busy-list" id="busyList"></div>
      </div>
    </div>

    <!-- Add sheet -->
    <div class="sheet" id="addSheet" aria-hidden="true">
      <div class="sheet-handle"></div>
      <div class="sheet-header">
        <div class="sheet-title">–ù–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ</div>
        <button class="sheet-close" id="closeAdd" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="sheet-body">
        <div class="field">
          <label for="eventTitle">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input id="eventTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≤—Å—Ç—Ä–µ—á–∞" />
        </div>

        <div class="field">
          <label for="eventDate">–î–∞—Ç–∞</label>
          <input id="eventDate" type="date" />
        </div>

        <div class="field-row">
          <div class="field">
            <label for="eventTimeStart">–ù–∞—á–∞–ª–æ</label>
            <input id="eventTimeStart" type="time" />
          </div>

          <div class="field">
            <label for="eventTimeEnd">–ö–æ–Ω–µ—Ü</label>
            <input id="eventTimeEnd" type="time" />
          </div>
        </div>

        <button class="primary-btn" id="saveEventBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>

    <!-- Group sheet -->
    <div class="sheet" id="groupSheet" aria-hidden="true">
      <div class="sheet-handle"></div>

      <div class="sheet-header">
        <div class="sheet-title" id="groupSheetTitle">–ì—Ä—É–ø–ø–∞</div>
        <button class="sheet-close" id="closeGroup" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>

      <div class="sheet-body">

      <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É) -->
      <div class="sheet-section">
        <div class="section-title">–£—á–∞—Å—Ç–Ω–∏–∫–∏</div>
        <div class="members-list" id="groupMembersList"></div>
      </div>

      <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω) -->
      <div class="sheet-section" id="memberAdminWrap" hidden>
        <div class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
        <div class="field">
          <label for="addMemberUsername">–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (username)</label>
          <input id="addMemberUsername" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: matthew" />
        </div>
        <button class="primary-btn" id="addMemberBtn" type="button">–î–æ–±–∞–≤–∏—Ç—å</button>
        <div class="color-hint">–í—ã —Å–º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∫–Ω–æ–ø–∫–æ–π —Å–ø—Ä–∞–≤–∞ –≤ —Å–ø–∏—Å–∫–µ.</div>
      </div>

      <!-- –ú–æ–π —Ü–≤–µ—Ç -->
      <div class="sheet-section">
        <div class="section-title">–ú–æ–π —Ü–≤–µ—Ç</div>

        <div class="color-row">
          <div class="color-preview" id="myColorPreview"></div>
          <input class="color-input" id="myColorInput" type="color" value="#c9b08a" />
          <button class="mini-btn" id="saveMyColorBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>

        <div class="palette-row" id="myColorPalette">
          <button class="palette-swatch" type="button" data-color="#c9b08a" style="background:#c9b08a"></button>
          <button class="palette-swatch" type="button" data-color="#7aa7ff" style="background:#7aa7ff"></button>
          <button class="palette-swatch" type="button" data-color="#6ee7b7" style="background:#6ee7b7"></button>
          <button class="palette-swatch" type="button" data-color="#fca5a5" style="background:#fca5a5"></button>
          <button class="palette-swatch" type="button" data-color="#fde68a" style="background:#fde68a"></button>
          <button class="palette-swatch" type="button" data-color="#a78bfa" style="background:#a78bfa"></button>
        </div>

        <div class="color-hint">–≠—Ç–æ—Ç —Ü–≤–µ—Ç –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–æ–±—ã—Ç–∏—è—Ö/—Ç–æ—á–∫–∞—Ö –∑–∞–Ω—è—Ç–æ—Å—Ç–∏.</div>
      </div>

      <!-- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω) -->
      <div class="field" id="renameWrap" hidden>
        <label for="groupNameInput">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</label>
        <input id="groupNameInput" placeholder="–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" />
        <button class="primary-btn" id="saveGroupNameBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ</button>
      </div>

    </div>
    </div>

    <!-- Invite sheet (–º–∏–Ω–∏ –æ–∫–Ω–æ –¥–ª—è —Å—Å—ã–ª–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è) -->
    <div class="sheet" id="inviteSheet" aria-hidden="true">
      <div class="sheet-handle"></div>

      <div class="sheet-header">
        <div class="sheet-title">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É</div>
        <button class="sheet-close" id="closeInvite" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>

      <div class="sheet-body">
        <div class="field">
          <label for="inviteLink">–°—Å—ã–ª–∫–∞</label>
          <div class="invite-row">
            <input id="inviteLink" class="invite-input" readonly value="" placeholder="–°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É‚Ä¶" />
            <button class="icon-mini-btn" id="copyInviteBtn" type="button" aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É"><i data-lucide="copy"></i></button>
          </div>
          <div class="color-hint" id="inviteHint">–ü–æ–∫–∞ –¥–µ–º–æ: —Å—Å—ã–ª–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –°–¥–µ–ª–∞–µ–º –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ ¬´–∫–æ–º–Ω–∞—Ç–∞¬ª –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç.</div>
        </div>
      </div>
</div>

    <!-- Groups sheet -->
    <div class="sheet" id="groupsSheet" aria-hidden="true">
      <div class="sheet-handle"></div>
      <div class="sheet-header">
        <div class="sheet-title">–ì—Ä—É–ø–ø—ã</div>
        <button class="sheet-close" id="closeGroups" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="sheet-body">
        <div class="sheet-section">
          <div class="section-title">–ú–æ–∏ –≥—Ä—É–ø–ø—ã</div>
          <div class="groups-list" id="groupsList"></div>
        </div>

        <div class="sheet-section">
          <div class="section-title">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</div>
          <div class="field">
            <label for="newGroupName">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <div class="input-action-row">
              <input id="newGroupName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–∞–±–æ—Ç–∞" />
              <button class="primary-btn primary-btn--inline" id="createGroupBtn" type="button" aria-label="–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
          </div>
        </div>
      </div>
</div>

    <!-- Find common free window sheet -->
    <div class="sheet" id="freeWindowSheet" aria-hidden="true">
      <div class="sheet-handle"></div>
      <div class="sheet-header">
        <div class="sheet-title">–ù–∞–π—Ç–∏ –æ–±—â–µ–µ –æ–∫–Ω–æ</div>
        <button class="sheet-close" id="closeFreeWindow" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="sheet-body">
        <div class="sheet-section">
          <div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É</div>
          <div class="groups-list" id="freeWindowGroups"></div>
        </div>

        <div class="sheet-section" id="freeWindowResultWrap" hidden>
          <div class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
          <div class="color-hint" id="freeWindowResult"></div>
          <button class="primary-btn" id="freeWindowCreateBtn" type="button">–°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
        </div>
      </div>

      <div class="sheet-footer">
        <button class="primary-btn" id="freeWindowDoneBtn" type="button">–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>


    
    <!-- Notifications Sheet -->
    <div class="sheet" id="notificationsSheet" hidden>
      <div class="sheet-handle"></div>
      <div class="sheet-header">
        <button class="icon-btn" id="closeNotifications" type="button" aria-label="–ù–∞–∑–∞–¥">‚Äπ</button>
        <div class="sheet-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
        <div style="width:44px"></div>
      </div>

      <div class="sheet-body">
        <div class="sheet-section">
          <div class="toggle-row">
            <div class="toggle-text">
              <div class="toggle-title">–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
            </div>
            <label class="switch">
              <input type="checkbox" id="notifMaster">
              <span class="slider"></span>
            </label>
          </div>

          <div class="subtoggles" id="notifSubWrap" hidden>
            <div class="toggle-row">
              <div class="toggle-text">
                <div class="toggle-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–ª–∞–Ω–∞—Ö –¥—Ä—É–≥–∏—Ö</div>
              </div>
              <label class="switch">
                <input type="checkbox" id="notifPlans">
                <span class="slider"></span>
              </label>
            </div>

            <div class="toggle-row">
              <div class="toggle-text">
                <div class="toggle-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–≤–æ–±–æ–¥–Ω–æ–º –¥–Ω–µ</div>
              </div>
              <label class="switch">
                <input type="checkbox" id="notifFreeDay">
                <span class="slider"></span>
              </label>
            </div>

            <div class="toggle-row">
              <div class="toggle-text">
                <div class="toggle-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–≤–æ–±–æ–¥–Ω–æ–º –æ–∫–Ω–µ</div>
              </div>
              <label class="switch">
                <input type="checkbox" id="notifFreeSlot">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Sheet -->
    <div class="sheet" id="settingsSheet" hidden>
      <div class="sheet-handle"></div>
      <div class="sheet-header">
        <button class="icon-btn" id="closeSettings" type="button" aria-label="–ù–∞–∑–∞–¥">‚Äπ</button>
        <div class="sheet-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        <div style="width:44px"></div>
      </div>

      <div class="sheet-body">
        <div class="sheet-section">
          <div class="toggle-row">
            <div class="toggle-text">
              <div class="toggle-title">–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</div>
            </div>
            <label class="switch">
              <input type="checkbox" id="themeToggle">
              <span class="slider"></span>
            </label>
          </div>

          <div class="sheet-divider"></div>

          <div class="row">
            <div class="row-label">–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏</div>
            <div class="segmented" id="weekStartSeg">
              <button class="seg-btn" data-value="mon" type="button">–ü–Ω</button>
              <button class="seg-btn" data-value="sun" type="button">–í—Å</button>
            </div>
          </div>

          <div class="row">
            <div class="row-label">–§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏</div>
            <div class="segmented" id="timeFormatSeg">
              <button class="seg-btn" data-value="24" type="button">24</button>
              <button class="seg-btn" data-value="12" type="button">12</button>
            </div>
          </div>
        </div>
      </div>
    </div>


<!-- ===== TABBAR ===== -->
<nav class="tabbar" role="tablist" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
    <button class="tab" data-tab="friends" aria-selected="false">
    <i data-lucide="users" class="tab-ico"></i>
    <span class="tab-label">–î—Ä—É–∑—å—è</span>
  </button>

  <button class="tab active" data-tab="calendar" aria-selected="true">
    <i data-lucide="calendar-days" class="tab-ico"></i>
    <span class="tab-label">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
  </button>

  <button class="tab" data-tab="profile" aria-selected="false">
    <i data-lucide="user" class="tab-ico"></i>
    <span class="tab-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
  </button>
</nav>

  </div>

  <script src="js/app.js?v=5007"></script>

  <script type="module">
    import { initFriends } from "./js/friends.js?v=5007";
    initFriends();
</script>

  <script type="module">
    import { initProfile } from "./js/profile.js?v=5007";
    initProfile();
  </script>

</body>
</html>
